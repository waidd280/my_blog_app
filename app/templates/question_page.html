{% extends 'base.html' %}

{% block body %}
<div class="question-page-header">
    <h1 class="question-pagetitle">{{ page_question.question_title }}</h1>
    <span class="question-author-head">{{ question_author }}</span>

    <hr />
    <br />

    <p>{{ page_question.question_info }}</p>
</div>

{% if not page_question.answers %}
    <p class="no-answers-message">There are no answers posted for this question yet...</p>
{% else %}
    <br />
{% endif %}

<div class="post-answer-box">
    <form method="POST">
        <h2>Post an answer:</h2>

        <div class="post-answer-container">
            {% if current_user.is_authenticated %}
            <textarea class="post-answer" rows=5 cols=65 
            placeholder="Have an answer? Share it here." 
            maxlength="10000" name="answer-content"></textarea>
            <button type="submit" id="submit-answer-btn">Post Answer</button>
            {% else %}
            <label>You must <a href='/login'>log in</a> to add an answer</label>
            <textarea class="post-answer" rows=5 cols=65 
            disabled name="answer-content"></textarea>
            <button id="submit-answer-btn" onclick="must_login()">Post Answer</button>
            {% endif %}
        </div>
    </form>
</div>

{% if page_question.answers %}
    {% for answer in page_question.answers %}
        <div class="answer-component">
            <p>{{ answer.answer_text }}</p>
            <br />
            <span>{{ users.query.filter_by(id=answer.user_id).first().name }}</span>
        </div>
    {% endfor %}
{% endif %}

{% endblock %}

{% block script %}
    <script src={{ url_for("static", filename="js/login_page.js") }}></script>
{% endblock %}
